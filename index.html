<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>aaaris's blog - aaaris' blog</title><meta name="author" content="aaaris"><meta name="copyright" content="aaaris"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="aaaris is talking here.">
<meta property="og:type" content="website">
<meta property="og:title" content="aaaris&#39;s blog">
<meta property="og:url" content="http://aaaris.github.io/index.html">
<meta property="og:site_name" content="aaaris&#39;s blog">
<meta property="og:description" content="aaaris is talking here.">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://aaaris.github.io/img/avatar.jpg">
<meta property="article:author" content="aaaris">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://aaaris.github.io/img/avatar.jpg"><link rel="shortcut icon" href="/img/yellowduck.webp"><link rel="canonical" href="http://aaaris.github.io/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'aaaris\'s blog',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2022-11-06 21:41:25'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">12</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background: linear-gradient(20deg, #0062be, #925696, #cc426e, #fb0347)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">aaaris's blog</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">aaaris's blog</h1><div id="site_social_icons"><a class="social-icon" href="https://github.com/aaaris" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:2997600742@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2022/11/06/TCPIP%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86%EF%BC%88%E4%B8%8B%EF%BC%89/" title="TCPIP网络编程 第一部分(下)"><img class="post_bg" src="https://ts1.cn.mm.bing.net/th/id/R-C.02ec8ba207e11700745f4ae8da647965?rik=Geqb9HR0hLfDyQ&amp;riu=http%3a%2f%2fwww.ituring.com.cn%2fbookcover%2f1284.253.big.jpg&amp;ehk=2eyQptq6FUVnOZjqSK%2fc7U22GY8mFGFLdnQ0IvcVXZ8%3d&amp;risl=&amp;pid=ImgRaw&amp;rto" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="TCPIP网络编程 第一部分(下)"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/11/06/TCPIP%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86%EF%BC%88%E4%B8%8B%EF%BC%89/" title="TCPIP网络编程 第一部分(下)">TCPIP网络编程 第一部分(下)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-11-06T12:50:08.635Z" title="发表于 2022-11-06 20:50:08">2022-11-06</time></span></div><div class="content">TCP/IP 网络编程
Part 01 开始网络编程（下）
第八章
</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/11/04/TCPIP%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86%EF%BC%88%E4%B8%8A%EF%BC%89/" title="TCPIP网络编程 第一部分(上)"><img class="post_bg" src="https://ts1.cn.mm.bing.net/th/id/R-C.02ec8ba207e11700745f4ae8da647965?rik=Geqb9HR0hLfDyQ&amp;riu=http%3a%2f%2fwww.ituring.com.cn%2fbookcover%2f1284.253.big.jpg&amp;ehk=2eyQptq6FUVnOZjqSK%2fc7U22GY8mFGFLdnQ0IvcVXZ8%3d&amp;risl=&amp;pid=ImgRaw&amp;rto" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="TCPIP网络编程 第一部分(上)"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/11/04/TCPIP%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86%EF%BC%88%E4%B8%8A%EF%BC%89/" title="TCPIP网络编程 第一部分(上)">TCPIP网络编程 第一部分(上)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-11-04T04:21:12.880Z" title="发表于 2022-11-04 12:21:12">2022-11-04</time></span></div><div class="content">TCP/IP 网络编程
前言
本书面向基于套接字的网络编程学习者，包含 Linux 和 Windows 两种操作系统平台的网络编程学习方法。
本书结构

第一部分介绍网络编程基础知识，包含计算机网络相关内容。
第二部分讲述 Linux 操作系统提供的相关系统函数。
第三部分讲述 Windows 操作系统提供的相关函数。
第四部分是为之前学习内容的总结。


个人博客读书笔记有所侧重 Linux 相关内容，故讲不对第三部分进行记录。

Part 01 开始网络编程（上）
第一章 理解网络编程和套接字
1.1 理解网络编程和套接字
网络编程——套接字编程就是使两台联网的计算机相互交换数据。

物理连接——网线
软件设备——套接字

1.1.1 构建接电话套接字
先讨论TCP套接字，TCP套接字可以比喻成电话机，具有拨打和接听功能。
以下先讨论接听电话的套接字创建：

调用socket函数（安装电话机）创建套接字：


问：“接电话需要准备什么？”
答：”当然是电话机！“

12#include &lt;sys/socket.h&gt;int socket(int domain, int t ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/10/26/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E5%8D%81%E7%AB%A0/" title="Linux系统编程 第十章"><img class="post_bg" src="https://pic1.zhimg.com/v2-6a22da24bf48ea75bbbd9bc258851cce_720w.jpg?source=172ae18b" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux系统编程 第十章"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/26/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E5%8D%81%E7%AB%A0/" title="Linux系统编程 第十章">Linux系统编程 第十章</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-10-26T14:05:22.739Z" title="发表于 2022-10-26 22:05:22">2022-10-26</time></span></div><div class="content">Linux系统编程
第十章 时间
内核关心三个时间：

墙上时间——真实事件（时间戳）
进程时间——进程消耗时间
单调时间——系统启动时间


Unix 系统使用大纪元——1970 年 1 月 1日 00 : 00 : 00——经过的秒数表示绝对时间。

Linux 中系统计时器频率被称为 HZ，通常是 100、250、1000。
POSIX 定义 sysconf (_SC_CLK_TCK) 用于获取 HZ。
10.1 时间的数据结构
10.1.1 原始表示
time_t 表示自大纪元以来已流逝的秒数。
12#include &lt;time.h&gt;typdef long time_t
10.1.2 毫秒级精度
12345#include &lt;sys/time.h&gt;struct timeval &#123;	time_t tv_sec; /* seconds */	suseconds_t tv_usec; /* microseconds */&#125;;
10.1.3 纳秒级精度
12345#include &lt;time.h&gt;struct timespec & ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/10/25/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E4%B9%9D%E7%AB%A0/" title="Linux系统编程 第九章"><img class="post_bg" src="https://pic1.zhimg.com/v2-6a22da24bf48ea75bbbd9bc258851cce_720w.jpg?source=172ae18b" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux系统编程 第九章"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/25/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E4%B9%9D%E7%AB%A0/" title="Linux系统编程 第九章">Linux系统编程 第九章</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-10-25T00:39:47.000Z" title="发表于 2022-10-25 08:39:47">2022-10-25</time></span></div><div class="content">Linux 系统编程
第九章 信号
信号是提供处理异步事件机制的软件中断，也是一种 IPC 的基本形式。
信号处理函数在内核注册，并被异步地调用。
9.1 信号概念
信号生命周期：产生 &gt;&gt; 内存存储发送 &gt;&gt; 内核处理
内核根据进程的请求进行三种处理方式：

忽略信号

不采取任何操作。（SIGKILL 和 SIGSTOP 无法忽略）


捕获并处理信号

暂停进程 &gt;&gt; 调用注册函数 &gt;&gt; 回到进程继续运行。（SIGKILL 和 SIGSTOP 无法捕获）


执行默认操作

取决于被发送的信号，默认操作通常是终止信号。程序员自提供信号默认是忽略。



9.1.1 信号标识符
信号标识符以 SIG 作为前缀，在 &lt;signal.h&gt; 头文件定义。

使用 kill -l 命令产生一个系统支持的信号列表

9.1.2 Linux 支持的信号

9.2 基本信号管理
signal() 函数是最简单古老的信号管理接口。
123#include &lt;signal.h&gt;typedef void (*sighandler_ ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/10/24/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E5%85%AB%E7%AB%A0/" title="Linux系统编程 第八章"><img class="post_bg" src="https://pic1.zhimg.com/v2-6a22da24bf48ea75bbbd9bc258851cce_720w.jpg?source=172ae18b" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux系统编程 第八章"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/24/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E5%85%AB%E7%AB%A0/" title="Linux系统编程 第八章">Linux系统编程 第八章</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-10-24T12:55:39.017Z" title="发表于 2022-10-24 20:55:39">2022-10-24</time></span></div><div class="content">Linux系统编程
第八章 内存管理
8.1 进程地址空间
Linux 内核为每个进程维护一个特殊的虚拟地址，从 0 开始。
8.1.1 页和页面调度
页大小包括 4K (32 bit)，8K (64 bit)。
每个页面有两种状态：

有效——与物理页或者一些二级存储介质相关联
无效——未分配或使用

8.1.1.1 共享和写时复制
虚存中的多个页面可能被映射到同个物理页面。
当一个进程试图写共享页：

内核允许
产生异常，内核进行写时拷贝。

8.1.2 存储器区域
内核将某些相同特征（例如读写权限）的页组织成块——段。
每个进程可见的段：

文本段：只读数据——代码、字符串
堆栈段：执行栈
数据段：（heap）动态存储空间，可写。
BSS 段：未被初始化的全局变量
映射文件：C 可链接库，映像文件等。

8.2 动态内存分配
malloc() 获取动态内存：
12#include &lt;stdlib.h&gt;void *malloc (size_t size);

C 会自动把返回值由 void 指针转变为需要的类型，C++ 不提供这种自动转换。

例子 xmalloc()  ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/10/24/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E4%B8%83%E7%AB%A0/" title="Linux系统编程 第七章"><img class="post_bg" src="https://pic1.zhimg.com/v2-6a22da24bf48ea75bbbd9bc258851cce_720w.jpg?source=172ae18b" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux系统编程 第七章"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/24/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E4%B8%83%E7%AB%A0/" title="Linux系统编程 第七章">Linux系统编程 第七章</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-10-24T12:52:16.828Z" title="发表于 2022-10-24 20:52:16">2022-10-24</time></span></div><div class="content">Linux系统编程
第七章 文件与目录管理
7.1 文件及其元数据
7.1.1 一组 stat 函数
123456#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;unistd.h&gt;int stat (const char *path, struct stat *buf);int fstat (int fd, struct stat *buf);int lstat (const char *path, struct stat *buf);
结构 stat 存储了获取的文件信息。


stat() 返回由路径 path 指明的文件信息。


fstat() 返回由 fd 指向的文件信息。


lstat() 类似 stat() 但返回符号链接本身。


例子：
1234567891011121314151617181920#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;unistd.h&gt;#include  ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/10/24/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E5%85%AD%E7%AB%A0/" title="Linux系统编程 第六章"><img class="post_bg" src="https://pic1.zhimg.com/v2-6a22da24bf48ea75bbbd9bc258851cce_720w.jpg?source=172ae18b" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux系统编程 第六章"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/24/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E5%85%AD%E7%AB%A0/" title="Linux系统编程 第六章">Linux系统编程 第六章</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-10-24T12:52:03.293Z" title="发表于 2022-10-24 20:52:03">2022-10-24</time></span></div><div class="content">Linux系统编程
第六章 高级进程管理
6.1 进程调度
调度器：把有限的处理器资源分配给进程的内核子系统。
时间片：进程在被强占前所允许的时间称为进程时间片。
Linux 实现了抢占式多任务操作系统——要求一个进程停止，处理器允许另一个。
6.1.1 大 O 计法
Linux 调度器的实现算法是 O(1) 算法。
6.1.2 时间片
Linux 通过动态分配进程时间片，以平衡交互性能和系统吞吐量。
6.1.3 I/O 约束进程 Vs. 处理器约束进程
处理器约束进程：持续消耗时间片（科学计算，无限循环）
I/O 约束进程：总是在等待资源的阻塞状态（GUI应用程序）
6.1.4 抢占调度
内核会基于所有耗光时间片的进程新的时间片，确保所有进程都运行。

如果没有就绪进程，内核会”运行“空闲进程（idle process）。

6.1.5 线程
Linux 内核把线程简化为共享资源的进程。

Linux 线程编程常用 API ”pthreads“。

6.2 让出处理器
sched_yield() 允许进程主动让出处理器，如果没有其他就绪进程，让出进程直接恢复。
12#include  ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/10/24/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E4%BA%94%E7%AB%A0/" title="Linux系统编程 第五章"><img class="post_bg" src="https://pic1.zhimg.com/v2-6a22da24bf48ea75bbbd9bc258851cce_720w.jpg?source=172ae18b" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux系统编程 第五章"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/24/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E4%BA%94%E7%AB%A0/" title="Linux系统编程 第五章">Linux系统编程 第五章</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-10-24T12:51:44.511Z" title="发表于 2022-10-24 20:51:44">2022-10-24</time></span></div><div class="content">Linux系统编程
第五章 进程管理
5.1 进程 ID
进程由 pid 作为唯一标识。
init 是内核运行的第一个进程，pid 为 1。
5.1.1 分配进程 ID
缺省情况，PID 最大限制为 32768（16位，向下兼容）。
内核分配 PID 是以严格的线性函数方式进行，保证同一时间 pid 的唯一性。
5.1.2 进程体系
创建新进程的称为父进程，新进程称为子进程，ppid 表示父进程 pid。
每个子进程都继承了父进程的用户和组，子进程通常属于其父进程所在的进程组便于通信。
5.1.3 pid_t
定义在 &lt;sys/types.h&gt; 中，在 Linux 中，通常是 C 语言的 int 类型。
5.1.4 获得进程 ID 和父进程 ID
getpid() 返回调用进程 ID。
123#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;pid_t getpid (void);
getppid() 返回调用进程的父进程 ID。
123#include &lt;sys/types.h&gt;#include &lt; ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/10/24/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E5%9B%9B%E7%AB%A0/" title="Linux系统编程 第四章"><img class="post_bg" src="https://pic1.zhimg.com/v2-6a22da24bf48ea75bbbd9bc258851cce_720w.jpg?source=172ae18b" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux系统编程 第四章"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/24/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E5%9B%9B%E7%AB%A0/" title="Linux系统编程 第四章">Linux系统编程 第四章</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-10-24T12:51:23.602Z" title="发表于 2022-10-24 20:51:23">2022-10-24</time></span></div><div class="content">Linux系统编程
第四章 高级文件 I/O
4.1 散布 / 聚集 I/O
散布聚集 I/O 是一种可以在单次系统调用中操作多个缓冲区的 I/O 方法。
又称向量 I/O，第二章提到的可称作线性 I/O。
4.1.1 readv() 和 writev()
readv() 从 fd 读取 count 个 segment 到 iov 描述的缓冲区中。
12#include &lt;sys/uio.h&gt;ssize_t readv (int fd, const struct iovec *iov, int count);
writev() 从 iov 描述的缓冲区中读取 count 个 segment 的数据并写入 fd 中。
12#include &lt;sys/uio.h&gt;ssize_t writev (int fd, const struct iovec *iov, int count);
每个 iovec 结构体描述一个独立的缓冲区，我们称其为 segment
12345#include &lt;sys/uio.h&gt;strcut iovec &#123;    vo ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/10/24/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E4%B8%89%E7%AB%A0/" title="Linux系统编程 第三章"><img class="post_bg" src="https://pic1.zhimg.com/v2-6a22da24bf48ea75bbbd9bc258851cce_720w.jpg?source=172ae18b" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux系统编程 第三章"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/10/24/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E4%B8%89%E7%AB%A0/" title="Linux系统编程 第三章">Linux系统编程 第三章</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-10-24T12:50:01.248Z" title="发表于 2022-10-24 20:50:01">2022-10-24</time></span></div><div class="content">Linux系统编程
第三章 缓冲输入输出
所有的磁盘操作都是基于块进行的。
块操作效率随着系统调用次数的增多而急剧下降。

当请求以块大小整数倍对齐地址时，I/O 效率时最理想的。

3.1 用户——缓冲 I/O
轻量级 I/O 请求通常使用用户缓冲 I/O 。
用户缓冲 I/O 在用户空间完成，它可以在程序中设定，也可以调用标准库透明地执行。

3.1.1 块大小
实际应用中，块大小一般是512字节，1024字节，2048字节，或4096字节。

使用用户缓冲 I/O，使得程序能操作更小的单位并方便一次写出或读出。

3.1.2 标准 I/O
C 标准库中提供了标准 I/O 库 stdio.h，其中实现了一个跨平台用户缓冲的解决方案。
3.1.3 文件指针
FILE 类型，流的概念
3.2 打开文件
12#include &lt;stdio.h&gt;FIFE* fopen(const char * path, const char * mode);
成功时，返回一个合法的 FILE 指针。失败时，返回 NULL，设置 errno。
3.2.1 模式
rwab +
3.2.2 通过文 ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">aaaris</div><div class="author-info__description">aaaris is talking here.</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">12</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/aaaris"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/aaaris" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:2997600742@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/11/06/TCPIP%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86%EF%BC%88%E4%B8%8B%EF%BC%89/" title="TCPIP网络编程 第一部分(下)"><img src="https://ts1.cn.mm.bing.net/th/id/R-C.02ec8ba207e11700745f4ae8da647965?rik=Geqb9HR0hLfDyQ&amp;riu=http%3a%2f%2fwww.ituring.com.cn%2fbookcover%2f1284.253.big.jpg&amp;ehk=2eyQptq6FUVnOZjqSK%2fc7U22GY8mFGFLdnQ0IvcVXZ8%3d&amp;risl=&amp;pid=ImgRaw&amp;rto" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="TCPIP网络编程 第一部分(下)"/></a><div class="content"><a class="title" href="/2022/11/06/TCPIP%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86%EF%BC%88%E4%B8%8B%EF%BC%89/" title="TCPIP网络编程 第一部分(下)">TCPIP网络编程 第一部分(下)</a><time datetime="2022-11-06T12:50:08.635Z" title="发表于 2022-11-06 20:50:08">2022-11-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/11/04/TCPIP%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86%EF%BC%88%E4%B8%8A%EF%BC%89/" title="TCPIP网络编程 第一部分(上)"><img src="https://ts1.cn.mm.bing.net/th/id/R-C.02ec8ba207e11700745f4ae8da647965?rik=Geqb9HR0hLfDyQ&amp;riu=http%3a%2f%2fwww.ituring.com.cn%2fbookcover%2f1284.253.big.jpg&amp;ehk=2eyQptq6FUVnOZjqSK%2fc7U22GY8mFGFLdnQ0IvcVXZ8%3d&amp;risl=&amp;pid=ImgRaw&amp;rto" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="TCPIP网络编程 第一部分(上)"/></a><div class="content"><a class="title" href="/2022/11/04/TCPIP%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86%EF%BC%88%E4%B8%8A%EF%BC%89/" title="TCPIP网络编程 第一部分(上)">TCPIP网络编程 第一部分(上)</a><time datetime="2022-11-04T04:21:12.880Z" title="发表于 2022-11-04 12:21:12">2022-11-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/26/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E5%8D%81%E7%AB%A0/" title="Linux系统编程 第十章"><img src="https://pic1.zhimg.com/v2-6a22da24bf48ea75bbbd9bc258851cce_720w.jpg?source=172ae18b" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux系统编程 第十章"/></a><div class="content"><a class="title" href="/2022/10/26/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E5%8D%81%E7%AB%A0/" title="Linux系统编程 第十章">Linux系统编程 第十章</a><time datetime="2022-10-26T14:05:22.739Z" title="发表于 2022-10-26 22:05:22">2022-10-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/25/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E4%B9%9D%E7%AB%A0/" title="Linux系统编程 第九章"><img src="https://pic1.zhimg.com/v2-6a22da24bf48ea75bbbd9bc258851cce_720w.jpg?source=172ae18b" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux系统编程 第九章"/></a><div class="content"><a class="title" href="/2022/10/25/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E4%B9%9D%E7%AB%A0/" title="Linux系统编程 第九章">Linux系统编程 第九章</a><time datetime="2022-10-25T00:39:47.000Z" title="发表于 2022-10-25 08:39:47">2022-10-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/24/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E5%85%AB%E7%AB%A0/" title="Linux系统编程 第八章"><img src="https://pic1.zhimg.com/v2-6a22da24bf48ea75bbbd9bc258851cce_720w.jpg?source=172ae18b" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux系统编程 第八章"/></a><div class="content"><a class="title" href="/2022/10/24/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%20%E7%AC%AC%E5%85%AB%E7%AB%A0/" title="Linux系统编程 第八章">Linux系统编程 第八章</a><time datetime="2022-10-24T12:55:39.017Z" title="发表于 2022-10-24 20:55:39">2022-10-24</time></div></div></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/11/"><span class="card-archive-list-date">十一月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/10/"><span class="card-archive-list-date">十月 2022</span><span class="card-archive-list-count">10</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">12</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2022-11-06T13:41:25.027Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 By aaaris</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcom to my <a href="https://aaaris.github.io">blog</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>